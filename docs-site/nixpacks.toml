[phases]
# Install Bun
[phases.setup]
run = ["curl -fsSL https://bun.sh/install | bash"]

# Install dependencies using Bun
[phases.install]
run = ["bun install"]

# Build the application using Bun
[phases.build]
run = ["bun run build"]

[environment]
# Ensure Bun is in the PATH
PATH = "/root/.bun/bin:$PATH"
NODE_ENV = "production"
NIXPACKS_PATH = "/app/node_modules/.bin"

[cache]
# Cache paths to speed up builds
paths = [
  "/root/.bun",
  "/root/.local/share/pnpm/store/v3"
]
