[phases]
# Define the setup phase as a structured command
[phases.setup]
run = ["curl -fsSL https://bun.sh/install | bash"]

# Define the install phase
[phases.install]
run = ["bun install"]

# Define the build phase
[phases.build]
run = ["bun run build"]

[environment]
# Include Bun in the PATH
PATH = "/root/.bun/bin:$PATH"
NODE_ENV = "production"
NIXPACKS_PATH = "/app/node_modules/.bin"

[cache]
# Cache paths to speed up builds
paths = [
  "/root/.bun",
  "/root/.local/share/pnpm/store/v3"
]